Import('env')

env=env.Clone()
env.Prepend(CPPPATH=['../src'], LIBS=['msys'])

env.AddProgram('mae2dms', 'converters/mae2dms.cxx')
env.AddProgram('dms2mae', 'converters/dms2mae.cxx')

## builder
env.AddLibrary('msys_builder', env.Split('''
builder/builder.cxx
builder/charmm_file.c
builder/defs.cxx
builder/geom.cxx
'''))

buildenv=env.Clone()
buildenv.Append(LIBS=['msys_builder', 'boost_python'])
buildenv.AddUnitTest('test_defs', 'builder/test_defs.cxx')
buildenv.AddUnitTest('test_builder', 'builder/test_builder.cxx')
buildenv.AddPythonExtension('_builder', ['builder/pymod.cxx'], prefix='msys')
buildenv.AddPythonModule('builder/builder.py', prefix='msys')

## fep
env.AddPythonModule('fep/_alchemical.py', prefix='msys')
env.AddPythonModule('fep/kept.py', prefix='msys')
env.AddScript('fep/dms-alchemical')
env.AddScript('fep/dms-uncharge')

## glue
env.AddPythonModule('glue/glue.py', prefix='msys')
env.AddScript('glue/dms-glue')

## grease
env.AddPythonModule('grease/grease.py', prefix='msys')
env.AddScript('grease/dms-grease')

## solvate
env.AddPythonModule('solvate/solvate.py', prefix='msys')
env.AddScript('solvate/dms-solvate')
env.AddShare('solvate/h2o.dms')

## neutralize
env.AddPythonModule('neutralize/neutralize.py', prefix='msys')
env.AddScript('neutralize/dms-neutralize')

## posre
env.AddPythonModule('posre/posre.py', prefix='msys')
env.AddScript('posre/dms-posre')

# thermalize
env.AddPythonModule('thermalize/thermalize.py', prefix='msys')
env.AddScript('thermalize/dms-thermalize')

# validate
env.AddPythonModule('validate/validate.py', prefix='msys')
env.AddScript('validate/dms-validate')

# info
env.AddScript('info/dms-diff')
env.AddScript('info/dms-dump')
env.AddScript('info/dms-info')

# other scripts
env.AddScript('scripts/dms-select')
